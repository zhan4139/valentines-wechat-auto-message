# valentines-wechat-auto-message

> Source: [Here](https://mp.weixin.qq.com/s/iyJavHjp8OWGPzXDWKMYAA)

This repo is based on WeChat public account (original link as above).
It will auto send customized message to your girlfriend.

Currently, it scraped message content and image from below websites:

*Message Content:* http://www.binzz.com/yulu2/3588.html

*Message Images:* http://tieba.baidu.com/p/3108805355

## Perquisites

* Mac OS (The example in link is using Windows 10)

* Python 3.6 with libraries:
    
    * requests (for http request)
    * re (regex)
    * itchat (wechat bot for logging in) 
    * selenium (for using headless browser PhantomJS) 
    
    `pip install itchat re itchat selenium`

    * PhantomJS
    
    `brew install phantomjs`


## HOW TO RUN:

1. create a txt file called `love_word.txt` under the current directory for saving scraping results.

2. edit `demo.py` file based on comments `change here`

3. scan QR code to login web wechat 

## FAQs

 * For Win user, change `/` to ``\\`` based on your file systems

 * `ghostdriver.log` file
    
    it is generated by PhantomJS, to turn that off, refer to [link](https://stackoverflow.com/questions/17048594/how-to-disable-or-change-the-path-of-ghostdriver-log) 

 * file.write(word + "\n") UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-27: ordinal not in range(128)
    
    reference: [Python Unicode HOWTO](https://docs.python.org/2/howto/unicode.html)
    solution: add `encoding="utf-8"` to `open()`
    
    
 * file.readlines()[inLoveDays] IndexError: list index out of range
    
    it is because it based on your in-love days as index to find love words in txt file and images under `img` folder. Make sure you have enough sentences and images
    
 * IndexError: list index out of range on line 69
   
   because the write file didn't close, point is still at the end of file
   
## Copy right 
   https://mp.weixin.qq.com/s/iyJavHjp8OWGPzXDWKMYAA